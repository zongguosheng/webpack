<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>评估预警平台 </title>
    <link rel="stylesheet" type="text/css" href="css/amazeui.min.css"/>
    <link rel="stylesheet" type="text/css" href="css/main.css"/>
    <link rel="stylesheet" type="text/css" href="css/zTreeStyle.css"/>
    <script type="text/javascript" src="js/jquery.min.js" ></script>
    <script type="text/javascript" src="js/jquery.ztree.core.js" ></script>
    <script type="text/javascript" src="js/jquery.ztree.excheck.js" ></script>
    <SCRIPT type="text/javascript">
		
		var setting = {
			view: {
				selectedMulti: false
			},
			check: {
				enable: true
			},
			data: {
				simpleData: {
					enable: true
				}
			},
			callback: {
                onCheck: onCheck,
                onCheckall: onCheckall
			}
		};

		var zNodes =[
			{ id:1, pId:0, name:"规划成果", open:true},
			    { id:11, pId:1, name:"总体规划",open:true },
			        { id:111, pId:11, name:"2001-2020年"},
                        { id:1111, pId:111, name:"随意勾选"},
                    { id:112, pId:11, name:"2001-2030年"},
                         { id:1112, pId:112, name:"随意勾选"},
			    { id:12, pId:1, name:"控制性详细规划规划", open:true},
			        { id:121, pId:12, name:"2010版", open:true},
		    	        { id:1211, pId:121, name:"规划界限"},
                        { id:1212, pId:121, name:"规划界限"},
                        { id:1213, pId:121, name:"规划界限"},
                        { id:1214, pId:121, name:"规划界限"},
                        { id:1215, pId:121, name:"规划界限"},
                    { id:131, pId:12, name:"专项规划"},
                        { id:132, pId:131, name:"规划界限"},

            { id:2, pId:0, name:"规划成果", open:true},
			{ id:21, pId:2, name:"总体规划",open:true },
			        { id:211, pId:21, name:"2001-2020年"},
                        { id:2111, pId:211, name:"随意勾选"},
                    { id:212, pId:21, name:"2001-2030年"},
                         { id:2121, pId:212, name:"随意勾选"},
			{ id:22, pId:2, name:"控制性详细规划规划", open:true},
			        { id:221, pId:22, name:"2010版", open:true},
		    	        { id:2211, pId:221, name:"规划界限"},
                        { id:2212, pId:221, name:"规划界限"},
                        { id:2213, pId:221, name:"规划界限"},
                        { id:2214, pId:221, name:"规划界限"},
                        { id:2215, pId:221, name:"规划界限"},
                    { id:222, pId:22, name:"专项规划"},
                        { id:2222, pId:222, name:"规划界限"},

		];

		var clearFlag = false;
		function onCheck(e, treeId, treeNode) {
			count();
			if (clearFlag) {
				clearCheckedOldNodes();
			}
		}
		function clearCheckedOldNodes() {
			var zTree = $.fn.zTree.getZTreeObj("common"),
			nodes = zTree.getChangeCheckedNodes();
			for (var i=0, l=nodes.length; i<l; i++) {
				nodes[i].checkedOld = nodes[i].checked;
			}
		}
		function count() {
			var zTree = $.fn.zTree.getZTreeObj("common"),
			checkCount = zTree.getCheckedNodes(true).length,
			nocheckCount = zTree.getCheckedNodes(false).length,
			changeCount = zTree.getChangeCheckedNodes().length;
			$("#checkCount").text(checkCount);
			$("#nocheckCount").text(nocheckCount);
			$("#changeCount").text(changeCount);

		}
		function createTree() {
			$.fn.zTree.init($("#common"), setting, zNodes);
			count();
			clearFlag = $("#last").attr("checked");
		}

		$(document).ready(function(){
			createTree();			
			$("#init").bind("change", createTree);
			$("#last").bind("change", createTree);
        });
        
        //========================
        var clearFlagall = false;
		function onCheckall(e, treeId, treeNode) {
			countall();
			if (clearFlagall) {
				clearCheckedOldNodes();
			}
		}
		function clearCheckedOldNodes() {
			var zTreeall = $.fn.zTree.getZTreeObj("all"),
			nodes = zTreeall.getChangeCheckedNodes();
			for (var i=0, l=nodes.length; i<l; i++) {
				nodes[i].checkedOld = nodes[i].checked;
			}
		}
		function countall() {
			var zTreeall = $.fn.zTree.getZTreeObj("all"),
			checkCountall = zTreeall.getCheckedNodes(true).length,
			nocheckCountall = zTreeall.getCheckedNodes(false).length,
			changeCountall = zTreeall.getChangeCheckedNodes().length;
			$("#checkCountall").text(checkCountall);
			$("#nocheckCountall").text(nocheckCountall);
			$("#changeCountall").text(changeCountall);

		}
		function createTreeall() {
			$.fn.zTree.init($("#all"), setting, zNodes);
			countall();
			clearFlagall = $("#lastall").attr("checked");
		}

		$(document).ready(function(){
			createTreeall();			
			$("#initall").bind("change", createTreeall);
			$("#lastall").bind("change", createTreeall);
        });
		
	</SCRIPT>
</head>
<body>
    <div class="am-g">
        <div class="header">
            <div class="headernav">
                <ul class="am-fr user-list">
                    <li><a href="#"> <span class="icon-user"></span>admin </a> </li>
                    <li><a href="#"><span class="icon-home"></span>主页</a> </li>
                </ul>
                <ul class="header-list am-fr">
                    <li ><a href="#">查询定位</a></li>
                    <li><a href="#">行政区划</a></li>
                    <li class="active"><a href="#">专题图</a></li>
                    <li><a href="#">叠加分析</a></li>
                    <li><a href="#">对比分析</a></li>
                    <li><a href="#">查询统计</a></li>
                    <li><a href="#">合规审查</a></li>
                </ul>
            </div>
            <div class="sub-title">
                <ul class="am-fr tool-list">
                    <li><a href="#" ><i class="icon1"></i>放大 </a> </li>
                    <li><a href="#" ><i class="icon2"></i>缩小 </a> </li>
                    <li><a href="#" ><i class="icon3"></i>全图 </a> </li>
                    <li><a href="#" ><i class="icon4"></i>测距 </a> </li>
                    <li><a href="#" ><i class="icon5"></i>面积 </a> </li>
                    <li><a href="#" ><i class="icon6"></i>清除 </a> </li>
                    <li><a href="#" ><i class="icon7"></i>属性 </a> </li>
                </ul>
            </div>
            <div class="title">
                <h2>国土空间规划监测评估预警系统   </h2>
                <span><i class="img"><img src="images/img2.png" > </i> 一张图 </span>
            </div>
        </div>
        <div class="content">
            <div class="left-isder am-fl">
                <div class="am-tabs" data-am-tabs>
                    <ul class="am-tabs-nav am-nav am-nav-tabs">
                      <li class="am-active"><a href="#tab1">常用图层</a></li>
                      <li><a href="#tab2">所有图层</a></li>
                      <li><a href="#tab3">规划文本</a></li>
                    </ul>
                  
                    <div class="am-tabs-bd">
                        <div class="am-tab-panel am-fade am-in am-active" id="tab1">
                            <ul id="common" class="ztree"></ul>

                        </div>
                        <div class="am-tab-panel am-fade" id="tab2">
                            <ul id="all" class="ztree"></ul>
                        </div>
                        <div class="am-tab-panel am-fade" id="tab3">
                    
                        </div>
                       
                    </div>
                  </div>
            </div>

            <div class="contentinfo am-fl">
                <div class="ztmapcontent">
                    <div class="w340">
                        <table class="table-w320">
                            <tr class="even">
                                <th>标题</th>
                                <td colspan="3">生态空间管制图（2018-2035）</td>
                            </tr>
                            <tr>
                                <th>图例</th>
                                <td><div class="checkboxgroup"><input type="checkbox" id="checkbox5"><label for="checkbox5"></label></div></td>
                                <th>指北针</th>
                                <td><div class="checkboxgroup"><input type="checkbox" id="checkbox6"><label for="checkbox6"></label></div></td>
                            </tr>
                            <tr class="even">
                                <th>比例尺</th>
                                <td colspan="3">1:400000</td>
                            </tr>
                            <tr>
                                <th colspan="4">制图单位</th>
                            </tr>
                            <tr>
                                <td colspan="4">张家口市自然资源和规划局</td>
                            </tr>
                          
                        </table>

                        <div class="btn-group">
                            <a href="#" class="btn-save">保存</a>
                            <a href="#" class="btn-export">导出</a>
                            <a href="#" class="btn-close">关闭</a>
                        </div>


                        <table class="table-w320 ">
                            <tr>
                                <th colspan="4">图层管理</th>
                            </tr>
                            <tr>
                                <td ><div class="checkboxgroup"><input type="checkbox" id="checkbox1"><label for="checkbox1"></label></div></td>
                                <td>生态空间 </td>
                                <td><a href="javascript:;" class="btn-remove" >移除</a></td>
                                <td><a href="#">显示图例</a> </td>
                            </tr>
                            <tr>
                                <td><div class="checkboxgroup"><input type="checkbox" checked="checked" id="checkbox2"><label for="checkbox2"></label></div></td>
                                <td>生态保护红线 </td>
                                <td><a href="javascript:;" class="btn-remove" >移除</a></td>
                                <td><a href="#">显示图例</a> </td>
                            </tr>
                            <tr>
                                <td><div class="checkboxgroup"><input type="checkbox" id="checkbox3"><label for="checkbox3"></label></div></td>
                                <td>一级生态林</td>
                                <td><a href="javascript:;" class="btn-remove" >移除</a></td>
                                <td><a href="javascript:;">显示图例</a> </td>
                            </tr>
                            <tr>
                                <td><div class="checkboxgroup"><input type="checkbox" id="checkbox4"><label for="checkbox4"></label></div></td>
                                <td>城镇空间</td>
                                <td><a href="javascript:;" class="btn-remove" >移除</a></td>
                                <td><a href="#">显示图例</a> </td>
                            </tr>
                        </table>
                    </div>
                    <div class="specialmap">
                        <img src="images/map2.jpg" />
                    </div>
                </div>
            </div>

        </div>
    </div>
    <script type="text/javascript" src="js/amazeui.min.js" ></script>
</body>
</html>